(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(0)),r=(n(45),n(24),n(72),n(75),o(n(227)));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.onSubmit;return a.default.createElement("div",{className:"container py-5"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-md-12"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-md-6 mx-auto"},a.default.createElement("div",{className:"card rounded-0"},a.default.createElement("div",{className:"card-header"},a.default.createElement("h3",{className:"mb-0"},"Login")),a.default.createElement("div",{className:"card-body"},a.default.createElement(r.default,{onSubmit:t}))))))))}},134:function(e,t,n){},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),l=n(24),s=u(n(97)),i=n(37),c=n(73);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){this.checkConnections()}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this;if(this.props.messages.length!=e.messages.length&&e.messages.length>0){var n=e.messages[0];this.props.currentMap.mapSensors.filter(function(e){return e.sensor==n.sensor}).map(function(e){t.mapRef.getWrappedInstance().updateSliceImage((0,i.getImageURL)(e.slice,n.value.value),e.position.x,e.position.y,e.slice)})}}},{key:"componentWillUnmount",value:function(){(0,c.wsStatusStop)()}},{key:"checkConnections",value:function(){var e=this.props,t=e.startMonitoring,n=e.wsStatusStop,a=e.currentMap;this.monitoring&&n(),a&&a.mapSensors&&(t(a.mapSensors.map(function(e){return e.sensor})),this.monitoring=!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentMap,a=t.messages,r=n.name,l=void 0===r?"":r,i=n.map,c=void 0===i?[]:i;return o.default.createElement("div",null,o.default.createElement("h1",null,l),o.default.createElement(s.default,{ref:function(t){return e.mapRef=t},map:c}),"Mensagens:",a.map(function(e,t){return o.default.createElement("div",{key:t},o.default.createElement("p",null,e.sensor,":",e.value.value," ",o.default.createElement("small",null,e.value.data)))}))}}]),t}();t.default=(0,l.connect)(function(e){return{currentMap:e.maps.currentMap,messages:e.maps.messages}},function(e){return{startMonitoring:function(t){console.log("startMonitoring:",t),(0,c.wsStatusStart)(e,t)},wsStatusStop:c.wsStatusStop}})(d)},136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),l=(a=o)&&a.__esModule?a:{default:a},s=n(24),i=n(73);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchMaps)()}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.selectMap;e.goto;return l.default.createElement("div",null,l.default.createElement("ul",{className:"list-group"},t.map(function(e,t){return l.default.createElement("li",{onClick:function(t){return n(e._id)},key:t,className:"list-group-item"},e.name)})))}}]),t}(),u={fetchMaps:i.fetchMaps,selectMap:i.selectMap};t.default=(0,s.connect)(function(e){return{list:e.maps.list}},u)(c)},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=c(n(0)),l=n(24),s=n(37),i=c(n(96));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDropOrClick=function(e,t,a){"drop"===a.type&&(console.log("acceptedFiles:",e),console.log("rejectedFiles:",t),e.length&&(n.setState({files:e}),a.dataTransfer&&a.dataTransfer.files))},n.state={files:[]},n.save=n.save.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"awesomeName",value:function(e){return e.split(".")[0]}},{key:"save",value:function(){var e=this;this.state.files.map(function(t){console.log(t),e.props.save({name:e.awesomeName(t.name),type:"IMAGE",images:[{image:[t],value:1}]})})}},{key:"render",value:function(){var e={accept:"image/png",multiple:!0,onDrop:this.handleDropOrClick};return o.default.createElement("div",null,o.default.createElement(i.default,a({style:{width:"50px",height:"50px",borderWidth:"2px",borderColor:"rgb(102, 102, 102)",borderStyle:"dashed",borderRadius:"5px"}},e)),o.default.createElement("button",{key:"1",className:"btn btn-primary",onClick:this.save},"Salvar"),this.state.files?this.state.files.map(function(e,t){return o.default.createElement("img",{width:"100px",key:t,src:e.preview})}):"Selecione um arquivo")}}]),t}(),d={save:s.save};t.default=(0,l.connect)(null,d)(u)},138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),o=(a=r)&&a.__esModule?a:{default:a},l=n(45),s=n(72);var i=function(e){var t=e.fields,n=e.meta,a=n.error,r=n.submitFailed;return o.default.createElement("div",{className:"form-group col-md-12"},o.default.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return t.push({})}}," + Image")," ",r&&a&&o.default.createElement("span",null,a),o.default.createElement("div",null,t.map(function(e,n){return o.default.createElement("div",{className:"col-6",key:n},o.default.createElement("h4",null,"Imagem #",n+1),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-6"},o.default.createElement(l.Field,{accept:"image/png",name:e+".image",component:s.FileField})),o.default.createElement("div",{className:"col-5"},o.default.createElement(l.Field,{help:"Informe o valor do sensor normalmente entre 0 e 1",name:e+".status",component:s.renderField,label:"Status"})),o.default.createElement("div",{className:"col-1"},o.default.createElement("button",{className:"btn",onClick:function(e){t.remove(n)}},o.default.createElement("i",{className:"fa fa-window-close"})))))})))};t.default=(0,l.reduxForm)({form:"FormPalette"})(function(e){var t=e.handleSubmit,n=!1;return o.default.createElement("div",null,o.default.createElement("button",{className:"btn",onClick:function(e){n.show()}},"+"),o.default.createElement(s.Modal,{title:"Novo Item",ref:function(e){return n=e},buttons:[o.default.createElement("button",{key:"1",className:"btn btn-primary",onClick:t},"Salvar")]},o.default.createElement("div",null,o.default.createElement("div",{className:"form-row"},o.default.createElement("div",{className:"form-group col-md-6"},o.default.createElement(l.Field,{component:s.renderField,name:"name",label:"Nome",help:"Nome do componente para facilitar sua busca"})),o.default.createElement("div",{className:"form-group col-md-6"},o.default.createElement(l.Field,{component:s.renderFieldSelect,name:"type",label:"Tipo",options:["ATUADOR","SENSOR","IMAGE"],help:"ATUADOR, SENSOR, IMAGE"}))),o.default.createElement("div",{className:"form-row"},o.default.createElement(l.FieldArray,{name:"images",component:i})))))})},139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),l=n(24),s=n(37),i=(n(72),u(n(138))),c=u(n(137));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){(0,this.props.fetch)()}},{key:"render",value:function(){var e=this.props,t=e.list,n=(e.loading,e.save),a=e.remove;return o.default.createElement("div",null,o.default.createElement(c.default,null),o.default.createElement(i.default,{onSubmit:n}),o.default.createElement("ul",{className:"list-group"},t.map(function(e,t){return o.default.createElement("li",{key:t,className:"list-group-item"},o.default.createElement("img",{style:{width:50},src:(0,s.getImageURL)(e._id,0)}),e.type," - ",e.name,o.default.createElement("i",{onClick:function(t){return a(e._id)},className:"fa fa-trash"}))})))}}]),t}(),f={fetch:s.fetch,save:s.save,remove:s.remove};t.default=(0,l.connect)(function(e){return{list:e.palette.list}},f)(d)},140:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem01IDExSDd2LTJoMTB2MnoiLz4KPC9zdmc+"},141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),o=(a=r)&&a.__esModule?a:{default:a},l=n(45),s=n(37);t.default=(0,l.reduxForm)({form:"PropertiesForm"})(function(e){var t=e.slice,n=e.handleSubmit,a=e.position;return o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("h5",{className:"modal-title"},"Sensor"),o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.default.createElement("span",{"aria-hidden":"true"},"×"))),o.default.createElement("div",{className:"modal-body"},o.default.createElement("div",null,o.default.createElement("div",{className:"form-group"},o.default.createElement("label",null,"Image:"),o.default.createElement("p",null,o.default.createElement("img",{src:(0,s.getImageURL)(t),style:{height:50}})),o.default.createElement("small",null,"Posição:",a.x,",",a.y)),o.default.createElement("div",{className:"form-group"},o.default.createElement("label",null,"Nome"),o.default.createElement(l.Field,{type:"text",component:"input",name:"name",className:"form-control",placeholder:"Nome"})),o.default.createElement("div",{className:"form-group"},o.default.createElement("label",null,"Sensor"),o.default.createElement(l.Field,{type:"text",component:"input",name:"sensor",className:"form-control",placeholder:"Sensor"})))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancelar"),o.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:n},"Salvar")))})},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=u(n(0)),o=n(24),l=u(n(71)),s=u(n(141)),i=n(74),c=n(37);function u(e){return e&&e.__esModule?e:{default:e}}var d={selectProperties:i.selectProperties,saveProperties:i.saveProperties};t.default=(0,o.connect)(function(e){return{mapSensors:e.map.mapSensors,palette:e.palette.list,selectedProperty:e.map.selectedProperty,selectedItem:e.map.currentSelected}},d)(function(e){e.selectedItem;var t=e.mapSensors,n=e.palette,o=e.selectedProperty,i=e.selectProperties,u=e.saveProperties;return r.default.createElement("div",null,t.map(function(e,t){return r.default.createElement("div",{key:t},r.default.createElement("div",{className:"card",style:{width:"18rem"}},r.default.createElement("img",{className:"card-img-top",src:(0,c.getImageURL)(e.slice)}),r.default.createElement("div",{className:"card-body"},r.default.createElement("h5",{className:"card-title"},e.name),r.default.createElement("p",{className:"card-text"},"Imagem: ",n.find(function(t){return t._id===e.slice}).name),r.default.createElement("p",null,"Sensor:  ",e.sensor||"Não Ligado"),r.default.createElement("button",{className:"btn  btn-primary",onClick:function(t){i(e)}},"Licar"))))}),o?r.default.createElement("div",{className:"modal  fade ",ref:function(e){return(0,l.default)(e).modal()},tabIndex:"-1",role:"dialog"},r.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},r.default.createElement(s.default,a({},o,{onSubmit:u})))):null)})},143:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=l(r);l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"render",value:function(){return o.default.createElement("div",null,"item1")}}]),t}();t.default=s},144:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABACAYAAADs39J0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALrSURBVHhe7dtNSxtBGAfw/Sb5WiIEv0KpND1IexEUTYNFaT1Y9WDpzZt4qBT64sVERJFSqNqA+j1GZtMN62Z28sxkZnZe/sKAxCVh5+fzMjuTLIvg5+DqcYGPCG4l7FvIIS7vh5+vHhgf/HfANGBahShAAOMYYxoEYByBqEIAxhLMrBCAMQRjGgIwmjC2IQBDhHENAZgamKYhAPMfxjeIZGF8h0gGJjSIaGFCh4gGJjaIYGFihwgGJjUIb2FSh/AGBhCjDbG64WyjDBByCGcRAwg1CGswgJgNwhgMIMxCaMMAwi4EGQYQbiGkMFuD2/G5Jlkrh7/ZR+ue3Qyz5bO/bLV/w7YvhtLeGiD2QN7371jn52/24vs1y0GKARh7ky76hy5DcIwJEMC4Adka/BtHRAEhBQGMHRgeEW9O/+SRUDey9R/9ccoqpy+kMnMosogow7w6/sWyk16bfTnoMsCYAyjqhahGiCKDQ7zbXGF7r+dGIMUAjBkUHQiOMQECmNlAqBBLh0dsc62TA1THswgpRwtSGR3HBIQ0QgBDw6BCvDwZsI3eW2FEKEUIYMQwVIhysRalJ+WUVQVJvcaotK9F10SFGKesr732ft3ET3s9la5s+3w4dUHH21mdiCiD7Xbm9vPjz9+68y3ATKYnlxCfFudbE18SAMwIpXGIqkyqMN5BpArjPUQqMFQIvo5Y+9gjrSNEXRUv1sIaQfzKX+1lsaQyFYjVnQ9sZ2lBC8MaRCwRw9cR0/YjePvKIyIIiFBhqAu6YCFCgYkuNanWHF9qDGWrNOjUFAoM9aFfNKnJZ5jiXJPsAEGyEE3UGECohovlh5giEEQEEclG8a8ep+H7Ed4v6Ijz5ewykzCm9iOsPOJwNqOGPsgEjO4OHX/25OwRh6H5cvY2s8CobpUCQoFVB0YFBBGhgFG+VAWGAgIITQiddYwMBBCGIFRgnG4MWbq/YN9WlMqqx2nQvjbAW4ZB19QAQN1HcphYIuIJwUxQEBOaNJ8AAAAASUVORK5CYII="},218:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(0)),r=(u(n(217)),u(n(97))),o=(u(n(143)),n(24)),l=n(37),s=n(74),i=u(n(142)),c=u(n(140));function u(e){return e&&e.__esModule?e:{default:e}}var d={selectItem:s.selectItem,filter:l.filter,saveMap:s.saveMap,changeName:s.changeName};t.default=(0,o.connect)(function(e){return{palette:e.palette.listFilterd,filterText:e.palette.filter,selectedItem:e.map.selectedItem,map:e.map.map,mapName:e.map.mapName,mapSensors:e.map.mapSensors}},d)(function(e){var t=e.palette,n=e.selectItem,o=e.filter,s=e.filterText,u=e.mapSensors,d=e.selectedItem,f=e.saveMap,m=e.map,p=e.mapName,h=e.changeName;return a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-3"},a.default.createElement("nav",{className:"navbar navbar-light bg-light",style:{height:50}},a.default.createElement("div",{className:"col-6"},a.default.createElement("input",{type:"text",className:"form-control ",value:s,onChange:function(e){return o(e.target.value)},placeholder:"Filtro"})),d?a.default.createElement("div",{className:"col-6",style:{height:50}},a.default.createElement("div",null,a.default.createElement("img",{style:{height:50},src:(0,l.getImageURL)(d._id)}),a.default.createElement("img",{src:c.default,onClick:function(e){n(null)},className:"mr-3"}))):null),a.default.createElement("nav",{className:"navbar navbar-light bg-light",style:{height:50}},a.default.createElement("div",{className:"col-6"},a.default.createElement("input",{type:"text",className:"form-control ",value:p,onChange:function(e){return h(e.target.value)},placeholder:"Nome do Mapa"})),a.default.createElement("div",{className:"col-6"},a.default.createElement("button",{className:"btn",onClick:function(e){return f({map:m,name:p,mapSensors:u})}},"Salvar"))),a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-12"},a.default.createElement("div",{id:"accordion"},["IMAGE","SENSOR","ATUADOR"].map(function(e){return a.default.createElement("div",{className:"card",key:e},a.default.createElement("div",{className:"card-header",id:"heading"+e},a.default.createElement("h5",{className:"mb-0"},a.default.createElement("button",{className:"btn btn-link","data-toggle":"collapse","data-target":"#collapse"+e,"aria-expanded":"true","aria-controls":"collapse"+e},e))),a.default.createElement("div",{id:"collapse"+e,className:"collapse show","aria-labelledby":"heading"+e,"data-parent":"#accordion"},a.default.createElement("div",{className:"card-body"},a.default.createElement("div",{className:"row",style:{overflowY:"scroll",maxHeight:"200px"}},t.filter(function(t){return t.type===e}).map(function(e,t){return a.default.createElement("div",{className:"col-4",key:t,onClick:function(t){n(e)}},a.default.createElement("img",{style:{height:50},src:(0,l.getImageURL)(e._id,0)}))})))))}))))),a.default.createElement("div",{className:"col-7"},a.default.createElement(r.default,{map:m})),a.default.createElement("div",{className:"col-2"},a.default.createElement(i.default,null)))})},219:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0zLjUgMTguNDlsNi02LjAxIDQgNEwyMiA2LjkybC0xLjQxLTEuNDEtNy4wOSA3Ljk3LTQtNEwyIDE2Ljk5eiIvPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4="},22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(0)),r=c(n(261)),o=n(43),l=n(24),s=c(n(125)),i=c(n(87));n(134),n(132),n(131),n(129);c(n(115)),n(75);function c(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.applyMiddleware)((0,s.default)())(o.createStore)(i.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());t.default=function(e){return a.default.createElement(l.Provider,{store:u},a.default.createElement(r.default,null))}},220:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjQUEyMjIyIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGlkPSJhIi8+CiAgICA8L2RlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImIiPgogICAgICAgIDx1c2Ugb3ZlcmZsb3c9InZpc2libGUiIHhsaW5rOmhyZWY9IiNhIi8+CiAgICA8L2NsaXBQYXRoPgogICAgPHBhdGggY2xpcC1wYXRoPSJ1cmwoI2IpIiBkPSJNOS4wMSAxNEgydjJoNy4wMXYzTDEzIDE1bC0zLjk5LTR2M3ptNS45OC0xdi0zSDIyVjhoLTcuMDFWNUwxMSA5bDMuOTkgNHoiLz4KPC9zdmc+"},221:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMjJBQTIyIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGlkPSJhIi8+CiAgICA8L2RlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImIiPgogICAgICAgIDx1c2Ugb3ZlcmZsb3c9InZpc2libGUiIHhsaW5rOmhyZWY9IiNhIi8+CiAgICA8L2NsaXBQYXRoPgogICAgPHBhdGggY2xpcC1wYXRoPSJ1cmwoI2IpIiBkPSJNOS4wMSAxNEgydjJoNy4wMXYzTDEzIDE1bC0zLjk5LTR2M3ptNS45OC0xdi0zSDIyVjhoLTcuMDFWNUwxMSA5bDMuOTkgNHoiLz4KPC9zdmc+"},223:function(e,t,n){},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=f(r),l=n(24),s=f(n(71)),i=f(n(224));n(223);var c=n(84),u=f(n(221)),d=f(n(220));function f(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.wsStatusStop,n=e.closeChart;this.modal&&this.props.hasSelectedSensor&&((0,s.default)(this.modal).modal(),(0,s.default)(this.modal).on("hidden.bs.modal",function(e){console.log("aaaaaaaaaaaaaaaaaaaa"),n(),t()}))}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this;console.log("SensorChart - componentDidUpdate");var t=this.props,n=t.hasSelectedSensor,a=t.startMonitoring,r=t.values,o=t.title;this.modal&&n&&(0,s.default)(this.modal).modal();var l=[];r&&(""!==o&&a(o),l=r.reduce(function(e,t){return e[0].push(new Date(t.data)),e[1].push(t.value),e},[["x"],["data1"]])),this.chartRef?this.chartRef.load({columns:l}):this.chartRef=i.default.generate({bindto:this.chart,size:{height:400,width:600},data:{x:"x",columns:l},axis:{x:{type:"timeseries",tick:{format:"%H:%M:%S"}}}}),setTimeout(function(t){return e.chartRef.resize({height:e.chart.clientHeight,width:e.chart.clientWidth})},300)}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.wsConnection,r=t.startMonitoring;return o.default.createElement("div",{className:"modal  fade ",ref:function(t){return e.modal=t},tabIndex:"-1",role:"dialog"},o.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("h5",{className:"modal-title"},a?o.default.createElement("img",{src:u.default,onClick:function(){return r(n)}}):o.default.createElement("img",{src:d.default,onClick:function(){return r(n)}}),"  Sensor - ",n||"Carregando..."),o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.default.createElement("span",{"aria-hidden":"true"},"×"))),o.default.createElement("div",{className:"modal-body"},o.default.createElement("div",{ref:function(t){return e.chart=t},style:{height:"400px"}})),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}}]),t}();t.default=(0,l.connect)(function(e){return{title:e.sensors.selectedSensor.sensor,values:e.sensors.selectedSensor.values,hasSelectedSensor:e.sensors.hasSelectedSensor,wsConnection:e.sensors.wsConnection}},function(e){return{startMonitoring:function(t){(0,c.wsStatusStart)(e,[t])},wsStatusStop:c.wsStatusStop,closeChart:function(){e((0,c.closeChart)())}}})(m)},226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),l=n(84),s=n(24),i=u(n(225)),c=u(n(219));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.sensor,n=e.onClick;return o.default.createElement("div",{onClick:n,className:"list-group-item list-group-item-action"},o.default.createElement("img",{src:c.default})," ::. ",t)},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this.props.fetchSensors;console.log(this.props),e()}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.fetchSensors,a=e.selectSensor,l=e.hasSelectedSensor;return o.default.createElement(r.Fragment,null,o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"form-group"},o.default.createElement("input",{type:"email",className:"form-control",onChange:function(e){n(e.target.value)},placeholder:"Sensor Name"}),o.default.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Minimun 1 characters")),o.default.createElement("div",{className:"list-group"},t.map(function(e,t){return o.default.createElement(d,{onClick:function(t){return a(e)},key:t,sensor:e})}))),l?o.default.createElement(i.default,null):null)}}]),t}();t.default=(0,s.connect)(function(e){return{list:e.sensors.list,currentFilter:e.sensors.currentFilter,hasSelectedSensor:e.sensors.hasSelectedSensor}},function(e){return{fetchSensors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e((0,l.fetchSensors)(t))},selectSensor:function(t){return e((0,l.selectSensor)(t))}}})(f)},227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),o=(a=r)&&a.__esModule?a:{default:a},l=n(45),s=n(24),i=n(72);n(75);t.default=(0,s.connect)(function(e){return{loginError:e.login.error}})((0,l.reduxForm)({form:"login",validate:function(e){var t={};return e.username||(t.username="Campo obrigatório"),e.password||(t.password="Campo obrigatório"),t}})(function(e){var t=e.handleSubmit,n=e.loginError;return o.default.createElement("form",{className:"form",role:"form",autoComplete:"off",id:"formLogin",noValidate:""},o.default.createElement("div",{className:"form-group"},o.default.createElement(l.Field,{type:"text",name:"username",label:"E-mail",component:i.renderField})),o.default.createElement("div",{className:"form-group"},o.default.createElement(l.Field,{type:"password",name:"password",label:"Password",component:i.renderField})),n?o.default.createElement("div",{className:"alert alert-danger",role:"alert"},n):null,o.default.createElement("button",{onClick:t,className:"btn btn-success btn-lg float-right",id:"btnLogin"},"Login"))}))},229:function(e,t,n){"use strict";n.r(t);var a=n(73);const r={list:[],currentMap:{},messages:[]};t.default=((e=r,{type:t,payload:n})=>{switch(t){case a.actions.FETCH_MAPS+"_FULFILLED":return{...e,list:n.data};case a.actions.FETCH_MAP_DETAIL+"_FULFILLED":return{...e,currentMap:n.data};case a.actions.WS_CONNECTED:case a.actions.WS_DISCONNECTED:return{...e,messages:[]};case a.actions.WS_MAP_MESSAGE:return{...e,messages:[n,...e.messages]};default:return e}})},230:function(e,t,n){"use strict";n.r(t);var a=n(74);let r=[];new Array(10);for(let e=0;e<10;e++)r.push(new Array(10));const o={selectedItem:null,map:r,mapSensors:[],mapName:"",currentSelected:null,selectedProperty:null};t.default=((e=o,{type:t,payload:n})=>{switch(t){case a.SELECT_ITEM:return{...e,selectedItem:n};case a.ADD_ITEM_ON_MAP:let r=[...e.map];return r[n.x][n.y].push(n.item),"SENSOR"===n.item.type||"ATUADOR"===n.item.type?{...e,map:r,mapSensors:[...e.mapSensors,{slice:n.item.id,sensor:"",position:{x:n.x,y:n.y}}]}:{...e,map:r};case a.POINT_SELECTED:return{...e,currentSelected:n};case a.SAVE_PROPERTIES:return{...e,mapSensors:e.mapSensors.map(t=>t.slice==e.selectedProperty.slice&&t.position==e.selectedProperty.position?{...t,name:n.name,sensor:n.sensor}:t),selectedProperty:null};case a.SELECT_EDIT_PROPERTIES:return{...e,selectedProperty:n};case a.CHANGE_NAME:return{...e,mapName:n};default:return e}})},231:function(e,t,n){"use strict";n.r(t);var a=n(37);const r={list:[],listFilterd:[],loading:!1,filter:""};t.default=((e=r,{type:t,payload:n})=>{switch(t){case a.ADD_PALETTE+"_FULFILLED":return{...e,list:[...e.list,n.data]};case a.REMOVE_PALETTE+"_FULFILLED":return{...e,list:e.list.filter(e=>e._id!=n.data._id)};case a.FETCH_PALETTE+"_FULFILLED":return{...e,list:n.data,loading:!1,listFilterd:e.filter?n.data.filter(t=>t.name.toLowerCase().indexOf(e.filter)>=0):n.data};case a.FETCH_PALETTE+"_REJECTED":case a.FETCH_PALETTE+"_PENDING":return{...e,list:[],loading:!0};case a.FILTER_PALETTE:return{...e,filter:n,listFilterd:n?e.list.filter(e=>e.name.toLowerCase().indexOf(n)>=0):e.list};default:return e}})},232:function(e,t,n){"use strict";n.r(t);var a=n(84);const r={sensor:"",values:[]},o={list:[],selectedSensor:r,hasSelectedSensor:!1,wsConnection:!1,limit:100};t.default=((e=o,t)=>{switch(t.type){case a.WS_CONNECTED:return{...e,wsConnection:!0};case a.WS_DISCONNECTED:return{...e,wsConnection:!1};case a.FETCH_SENSORS+"_FULFILLED":return Object.assign({},e,{list:t.payload.data});case a.INVALID_FILTER:return Object.assign({},e,{list:[]});case a.SENSOR_UPDATE:const n=t.payload;if(console.log(n),e.selectedSensor&&e.selectedSensor.values&&e.selectedSensor.sensor==n.sensor){const t=Object.assign(e.selectedSensor,{values:[n.value,...e.selectedSensor.values]});return t.values.length>e.limit&&t.values.splice(e.limit,t.values.length-e.limit),Object.assign({},e,{selectedSensor:t})}return e;case a.SELECT_SENSOR+"_FULFILLED":return Object.assign({},e,{selectedSensor:t.payload.data});case a.SELECT_SENSOR+"_REJECTED":return Object.assign({},e,{selectedSensor:r,hasSelectedSensor:!1});case a.SELECT_SENSOR+"_PENDING":return Object.assign({},e,{selectedSensor:r,hasSelectedSensor:!0});case a.CLOSE_CHART:return Object.assign({},e,{selectedSensor:r,hasSelectedSensor:!1});default:return e}})},252:function(e,t,n){"use strict";n.r(t);var a=n(75);t.default=((e={isLoged:!0,error:""},t)=>{if(!t.payload)return e;switch(t.type){case a.LOGIN:if(t.payload.status||t.payload.response&&t.payload.response.status)switch(t.payload.status||t.payload.response.status){case 200:return{...e,isLoged:!0,error:""};case 401:return{...e,isLoged:!1,error:"Usuário ou senha invalidos"}}return{...e,isLoged:!1,error:"Erro ao tentar acessar o servidor"};default:return e}})},254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),l=(a=o)&&a.__esModule?a:{default:a},s=n(24);n(126),n(87);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.goto=n.goto.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"goto",value:function(e){this.props.changeUrl(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.url,a=void 0===n?"":n,r=t.routes;return l.default.createElement("div",{className:"list-group"},l.default.createElement("div",{onClick:function(){return e.goto("/")},className:"list-group-item "+("/"==a?"active":"")},"Home"),r.map(function(t,n){return t.title?l.default.createElement("div",{onClick:function(){return e.goto(t.path)},className:"list-group-item "+(a.startsWith(t.path)?"active":""),key:n},t.title):null}))}}]),t}();t.default=(0,s.connect)(function(e){return{url:e.menu.currentUrl}})(i)},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=E(r),l=n(260),s=E(n(122)),i=n(24),c=E(n(254)),u=n(87),d=E(n(115)),f=E(n(226)),m=E(n(218)),p=E(n(139)),h=E(n(136)),g=E(n(135));function E(e){return e&&e.__esModule?e:{default:e}}var v=(0,s.default)({queryKey:!1}),y=[{title:"",path:"/login",component:d.default},{title:"Sensores",path:"/sensor",component:f.default},{title:"Editor",path:"/editor",component:m.default},{title:"Palette",path:"/palette/list",component:p.default},{title:"Mapas",path:"/mapas/list",component:h.default},{title:"Map Detail",path:"/mapas/detail",component:g.default,hide:!0}],b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.changeUrl;t(e.login?v.location.pathname:"/login")}},{key:"shouldComponentUpdate",value:function(e){return e.currentUrl&&e.currentUrl!=this.props.currentUrl&&v.push(e.currentUrl),!0}},{key:"render",value:function(){var e=this.props,t=e.changeUrl,n=e.login;return o.default.createElement(l.Router,{history:v},o.default.createElement("div",{className:"container-fluid"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-2"},n?o.default.createElement(c.default,{routes:y,changeUrl:t}):null),o.default.createElement("div",{className:"col-10"},y.map(function(e,t){return o.default.createElement(l.Route,{key:t,path:e.path,component:e.component})})))))}}]),t}();t.default=(0,i.connect)(function(e){return{login:e.login.isLoged,currentUrl:e.menu.currentUrl}},function(e){return{changeUrl:function(t){e((0,u.goto)(t))}}})(b)},37:function(e,t,n){"use strict";n.r(t),n.d(t,"ADD_PALETTE",function(){return l}),n.d(t,"REMOVE_PALETTE",function(){return s}),n.d(t,"FETCH_PALETTE",function(){return i}),n.d(t,"FILTER_PALETTE",function(){return c}),n.d(t,"save",function(){return u}),n.d(t,"fetch",function(){return d}),n.d(t,"remove",function(){return f}),n.d(t,"getImageURL",function(){return m}),n.d(t,"filter",function(){return p});var a=n(48),r=n.n(a),o=n(47);const l="ADD_PALETTE",s="REMOVE_PALETTE",i="FETCH_PALETTE",c="FILTER_PALETTE",u=e=>{const t=new FormData(e);t.append("values",JSON.stringify(e));const n=e.images.map((e,n)=>(t.append(""+n,e.image[0]),console.log(e.image),e.image[0]));return console.log(n),{type:l,payload:r.a.put(o.a+"/slice",t)}},d=()=>({type:i,payload:r.a.get(o.a+"/slice")}),f=e=>({type:s,payload:r.a.delete(o.a+"/slice/"+e)}),m=(e,t=0)=>o.a+"/slice/"+e+"/imageByValue/"+t,p=e=>({type:c,payload:e})},47:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});const a="localhost:3000"===window.location.host?"http://localhost:8080/api":"/api",r="localhost:3000"===window.location.host?"ws://localhost:8080/api/sensor/wsstatus":"ws://"+window.location.host+"/api/sensor/wsstatus"},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=t.FileField=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.renderField=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,s=o.touched,i=o.error,c=e.help;return l.default.createElement("div",{className:"form-group "},l.default.createElement("label",null,n),l.default.createElement("div",null,l.default.createElement("input",r({className:"form-control"},t,{placeholder:n,type:a})),c&&l.default.createElement("small",{className:"form-text "},"* ",c),s&&i&&l.default.createElement("small",{className:"form-text text-danger"},"* ",i)))},t.renderFieldSelect=function(e){var t=e.input,n=e.label,a=e.meta,o=a.touched,s=a.error,i=e.help,c=e.options;return l.default.createElement("div",{className:"form-group "},l.default.createElement("label",null,n),l.default.createElement("div",null,l.default.createElement("select",r({className:"form-control"},t,{placeholder:n}),c.map(function(e){return l.default.createElement("option",{key:e,value:e},e)})),i&&l.default.createElement("small",{className:"form-text "},"* ",i),o&&s&&l.default.createElement("small",{className:"form-text text-danger"},"* ",s)))};var o=n(0),l=c(o),s=c(n(96)),i=c(n(71));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.FileField=function(e){function t(){var e,n,a;u(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleDropOrClick=function(e,t,n){var r=n,o=a.props.input,l=o.onChange,s=o.onBlur;"drop"===n.type&&(r=e.length?n.dataTransfer&&n.dataTransfer.files||e:null),s(r),l(r)},d(a,n)}return f(t,l.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.input,n=e.meta,a=(n.touched,n.error,this.props),o=a.accept,i=a.multiple,c=t&&t.value&&t.value[0]||null,u={accept:o,multiple:i,onDrop:this.handleDropOrClick};return l.default.createElement("div",null,l.default.createElement("input",r({type:"hidden",disabled:!0},t)),c?l.default.createElement("span",null,c.name):"Selecione um arquivo",l.default.createElement(s.default,r({style:{width:"50px",height:"50px",borderWidth:"2px",borderColor:"rgb(102, 102, 102)",borderStyle:"dashed",borderRadius:"5px"}},u),c?l.default.createElement("img",{width:"100%",src:c.preview}):null))}}]),t}(),t.Modal=function(e){function t(){return u(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,o.Component),a(t,[{key:"show",value:function(){this.modal&&(0,i.default)(this.modal).modal()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.title,r=t.buttons;return l.default.createElement("div",{className:"modal  fade ",ref:function(t){return e.modal=t},tabIndex:"-1",role:"dialog"},l.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-header"},l.default.createElement("h5",{className:"modal-title"},a),l.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.default.createElement("span",{"aria-hidden":"true"},"×"))),l.default.createElement("div",{className:"modal-body"},n),l.default.createElement("div",{className:"modal-footer"},r||l.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}}]),t}();t.default={}},73:function(e,t,n){"use strict";n.r(t),n.d(t,"actions",function(){return l}),n.d(t,"fetchMaps",function(){return s}),n.d(t,"selectMap",function(){return i}),n.d(t,"wsStatusStop",function(){return d}),n.d(t,"wsStatusStart",function(){return f});var a=n(48),r=n.n(a),o=n(47);const l={FETCH_MAPS:"FETCH_MAPS",SELECT_MAP:"SELECT_MAP",FETCH_MAP_DETAIL:"FETCH_MAP_DETAIL",WS_MAP_MESSAGE:"WS_MAP_MESSAGE",WS_CONNECTED:"WS_CONNECTED",WS_DISCONNECTED:"WS_DISCONNECTED"},s=e=>({type:l.FETCH_MAPS,payload:r.a.get(o.a+"/map")}),i=e=>({type:l.FETCH_MAP_DETAIL,payload:r.a.get(o.a+"/map/"+e)});let c=void 0,u=[];const d=()=>{c&&c.close()},f=(e,t)=>{if(t&&0!==t.length){if(c){if(t.length==u.length&&t.every((e,t)=>e===u[t]))return void console.log("Mesmo",u);console.log("Não é o mesmo Fechando conexão",u),c.close()}(c=new WebSocket(o.b+"?sensors="+JSON.stringify(t))).onopen=(n=>{console.log("onopen ws"),u=t,e({type:l.WS_CONNECTED})}),c.onmessage=(t=>{console.log("message:",t),e({type:l.WS_MAP_MESSAGE,payload:JSON.parse(t.data)})}),c.onclose=(t=>{console.log("WS onclose:",t),u=[],e({type:l.WS_DISCONNECTED,payload:t})}),c.onerror=(t=>{u=[],e({type:l.WS_DISCONNECTED,payload:t})})}}},74:function(e,t,n){"use strict";n.r(t),n.d(t,"SELECT_ITEM",function(){return l}),n.d(t,"ADD_ITEM_ON_MAP",function(){return s}),n.d(t,"POINT_SELECTED",function(){return i}),n.d(t,"SAVE_PROPERTIES",function(){return c}),n.d(t,"SELECT_EDIT_PROPERTIES",function(){return u}),n.d(t,"SAVEMAP",function(){return d}),n.d(t,"CHANGE_NAME",function(){return f}),n.d(t,"selectItem",function(){return m}),n.d(t,"saveMap",function(){return p}),n.d(t,"addItem",function(){return h}),n.d(t,"itemPointSelected",function(){return g}),n.d(t,"saveProperties",function(){return E}),n.d(t,"selectProperties",function(){return v}),n.d(t,"changeName",function(){return y});var a=n(48),r=n.n(a),o=n(47);const l="SELECT_ITEM",s="ADD_ITEM_ON_MAP",i="POINT_SELECTED",c="SAVE_PROPERTIES",u="SELECT_EDIT_PROPERTIES",d="SAVEMAP",f="CHANGE_NAME",m=e=>({type:l,payload:e}),p=e=>({type:d,payload:e._id?r.a.post(o.a+"/map",e):r.a.put(o.a+"/map",e)}),h=(e,t,n)=>({type:s,payload:{item:e,x:t,y:n}}),g=(e,t)=>({type:i,payload:{x:e,y:t}}),E=e=>({type:c,payload:e}),v=e=>({type:u,payload:e}),y=e=>({type:f,payload:e})},75:function(e,t,n){"use strict";n.r(t),n.d(t,"LOGIN",function(){return l}),n.d(t,"login",function(){return s});var a=n(48),r=n.n(a),o=n(47);const l="LOGIN";function s(e){return{type:l,payload:r.a.post(o.a+"/login",e).then(e=>(instance.defaultConfig.headers.authorization="bearer "+e.data,e))}}},84:function(e,t,n){"use strict";n.r(t),n.d(t,"FETCH_SENSORS",function(){return l}),n.d(t,"INVALID_FILTER",function(){return s}),n.d(t,"SELECT_SENSOR",function(){return i}),n.d(t,"SENSOR_UPDATE",function(){return c}),n.d(t,"CLOSE_CHART",function(){return u}),n.d(t,"WS_CONNECTED",function(){return d}),n.d(t,"WS_DISCONNECTED",function(){return f}),n.d(t,"closeChart",function(){return m}),n.d(t,"selectSensor",function(){return p}),n.d(t,"fetchSensors",function(){return h}),n.d(t,"wsStatusStop",function(){return v}),n.d(t,"wsStatusStart",function(){return y});var a=n(47),r=n(48),o=n.n(r);const l="FETCH_SENSORS",s="INVALID_FILTER",i="SELECT_SENSOR",c="SENSOR_UPDATE",u="CLOSE_CHART",d="WS_CONNECTED",f="WS_DISCONNECTED",m=()=>({type:u}),p=e=>({type:i,payload:o.a.get(a.a+"/sensor/values?name="+e)}),h=e=>!e||e.length<1?{type:s}:{type:l,payload:o.a.get(a.a+"/sensor/list?name="+e)};let g=void 0,E=[];const v=()=>{g&&g.close()},y=(e,t)=>{if(t&&0!==t.length){if(g){if(t.length==E.length&&t.every((e,t)=>e===E[t]))return void console.log("Mesmo",E);console.log("Não é o mesmo Fechando conexão",E),g.close()}(g=new WebSocket(a.b+"?sensors="+JSON.stringify(t))).onopen=(n=>{console.log("onopen ws"),E=t,e({type:d})}),g.onmessage=(t=>{console.log("message:",t),e({type:c,payload:JSON.parse(t.data)})}),g.onclose=(t=>{console.log("WS onclose:",t),E=[],e({type:f})}),g.onerror=(t=>{E=[],e({type:f})})}}},87:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goto=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(43),o=n(45),l=f(n(252)),s=f(n(232)),i=f(n(231)),c=f(n(230)),u=f(n(229)),d=n(73);function f(e){return e&&e.__esModule?e:{default:e}}t.goto=function(e){return{type:"CHANGE_PAGE",payload:e}};t.default=(0,r.combineReducers)({login:l.default,sensors:s.default,palette:i.default,map:c.default,maps:u.default,form:o.reducer,menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUrl:"/"},t=arguments[1];switch(t.type){case"CHANGE_PAGE":return Object.assign({},a({},e),{currentUrl:t.payload});case d.actions.FETCH_MAP_DETAIL+"_FULFILLED":return Object.assign({},a({},e),{currentUrl:"/mapas/detail"});default:return e}}})},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),l=d(o),s=n(24),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(128)),c=(d(n(144)),n(37)),u=n(74);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m=function e(t,n){f(this,e),this.x=t,this.y=n},p=function(e){function t(e){f(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.map=e.map||[],n.baseX=25*n.map.length,n.comps=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"updateSliceImage",value:function(e,t,n,a){var r=-1;console.log(a);for(var o=0;o<this.map[t][n].length;o++)if(console.log("Procurando:",this.map[t][n][o]),this.map[t][n][o].id==a){r=o;break}-1!=r&&this.svg.select("#comp_"+t+"_"+n+"_"+r).node()&&(console.log(this.svg.select("#comp_"+t+"_"+n+"_"+r).node()),this.svg.select("#comp_"+t+"_"+n+"_"+r).node().src=e,this.svg.select("#comp_"+t+"_"+n+"_"+r).attr("xlink:href",e))}}]),r(t,[{key:"componentDidMount",value:function(){var e=this;this.mode=0,this.rootsvg=i.select(this.root).append("svg"),this.mainsvg=this.rootsvg.append("g"),this.grid=this.mainsvg.append("g"),this.svg=this.mainsvg.append("g"),this.svg.attr("fill","antiquewhite"),this.svg.attr("width","100%"),this.svg.attr("height","100%"),this.rootsvg.attr("width","100%"),this.rootsvg.attr("height","100%"),this.mainsvg.attr("width","100%"),this.mainsvg.attr("height","100%"),this.grid.attr("width","100%"),this.grid.attr("height","100%"),this.rootsvg.on("mouseleave",function(t){if(e.component&&e.dragingElement){e.dragingElement.remove();var n=e.comps.indexOf(e.dragingElement,0);n>=-1&&e.comps.splice(n,1),e.dragingElement=null}}),this.mainsvg.on("contextmenu",function(){return i.event.preventDefault(),!1}),this.mainsvg.on("mousedown",function(t){if(2==i.event.button){e.mode="SELECT_AREA",e.selectElement=e.createRect("selectArea");var n=i.mouse(i.event.currentTarget),a=e.getTileCoordinates(e.isoTo2D(new m(n[0],n[1]+25)),50);e.selectElement.attr("stroke","#00FF00"),e.selectElement.p1=a}}),this.mainsvg.on("mouseup",function(t){switch(e.mode){case"SELECT_AREA":if(e.component)for(var n=Math.min(e.selectElement.p1.x,e.selectElement.p2.x),r=Math.max(e.selectElement.p1.x,e.selectElement.p2.x),o=Math.min(e.selectElement.p1.y,e.selectElement.p2.y),l=Math.max(e.selectElement.p1.y,e.selectElement.p2.y),s=n;s<=r;s++)for(var i=o;i<=l;i++)e.props.addItem(a({},e.component),s,i);e.selectElement.remove()}e.mode=0}),this.mainsvg.on("click",function(t){var n=i.mouse(i.event.currentTarget),r=e.getTileCoordinates(e.isoTo2D(new m(n[0],n[1]+25)),50);e.component?e.props.addItem(a({},e.component),r.x,r.y):e.props.itemSelected(r.x,r.y)}),this.mainsvg.on("mousemove",function(t){var n=i.mouse(i.event.currentTarget),a=e.getTileCoordinates(e.isoTo2D(new m(n[0],n[1]+25)),50),r=e.twoDToIso(e.get2dFromTileCoordinates(a,50));switch(e.mode){case"SELECT_AREA":e.selectElement.attr("points",e.getRectPoints(e.selectElement.p1,a)),e.selectElement.p2=a;break;default:if(e.svg.selectAll("#point").attr("transform","translate("+r.x+","+r.y+")"),e.component)if(e.dragingElement=e.svg.selectAll("#moving"),e.dragingElement.node())e.dragingElement.attr("x",r.x-50*e.component.w).attr("y",r.y-e.dragingElement.node().getBBox().height+25),e.dragingElement.node()&&e.dragingElement.node().parentNode.appendChild(e.dragingElement.node());else{var o=e.component.image,l=new Image;l.onload=function(t){e.dragingElement=e.svg.append("image").attr("xlink:href",o).attr("x",r.x*e.component.w).attr("y",r.y).attr("id","moving").attr("opacity",.5).attr("width",100*e.component.w),e.comps.push(e.dragingElement),e.dragingElement.call(i.drag().on("drag",function(t,n,a){var r=i.mouse(a[n]),o=e.twoDToIso(e.get2dFromTileCoordinates(e.getTileCoordinates(e.isoTo2D(new m(r[0],r[1]+25)),50),50));e.svg.selectAll("#point").attr("transform","translate("+o.x+","+o.y+")"),i.select(a[n]).attr("x",o.x).attr("y",o.y-e.dragingElement.node().getBBox().height)}).on("end",function(e){}))},l.src=o}}});var t=i.zoom().filter(function(){return i.event instanceof WheelEvent||1==i.event.button}).scaleExtent([.1,10]).on("zoom",function(){e.mainsvg.attr("transform",i.event.transform)});this.rootsvg.call(t).call(t.transform,i.zoomIdentity.translate(this.baseX,0).scale(.5)),this.mainsvg.attr("transform","translate("+this.baseX+",0)scale(.5,.5)"),this.createGrid(!0)}},{key:"componentDidUpdate",value:function(){this.createGrid(),this.props.selectedItem?this.component=new function e(t,n,a,r){f(this,e),this.image=t,this.w=n,this.id=a,this.type=r}((0,c.getImageURL)(this.props.selectedItem._id,0),this.props.selectedItem.width,this.props.selectedItem._id,this.props.selectedItem.type):this.component=null}},{key:"getRectPoints",value:function(e,t){var n=this.twoDToIso(this.get2dFromTileCoordinates(new m(e.x,e.y),50)),a=this.twoDToIso(this.get2dFromTileCoordinates(new m(e.x,t.y),50)),r=this.twoDToIso(this.get2dFromTileCoordinates(new m(t.x,t.y),50)),o=this.twoDToIso(this.get2dFromTileCoordinates(new m(t.x,e.y),50)),l=n.x-50,s=n.y;return l+","+s+" "+a.x+","+(a.y-25)+" "+(r.x+50)+","+r.y+" "+o.x+","+(o.y+25)+" "+l+","+s}},{key:"createRect",value:function(e){return this.svg.append("g").attr("id",e).append("polygon").attr("points",this.getRectPoints(new m(0,0),new m(0,0))).attr("fill","#FFFFFF").attr("stroke","#FF0000").attr("stroke-width",2).attr("opacity",.5)}},{key:"createGrid",value:function(e){for(var t=this,n=this.map.length||50,a=0;a<n;a++){this.map[a]=this.map[a]||[];for(var r=this.map[a].length||50,o=function(n){t.map[a][n]=t.map[a][n]||[];var r=t.twoDToIso(t.get2dFromTileCoordinates(new m(a,n),50));if(e){var o=new m(a,n);t.grid.append("polygon").attr("points",t.getRectPoints(o,o)).attr("fill","#FFFFFF").attr("stroke","#CCCCCC").attr("stroke-width",2).attr("opacity",.5)}if(t.map[a][n])for(var l=function(e){var o=t.map[a][n][e].image;if(t.svg.select("#comp_"+a+"_"+n+"_"+e).node())return"continue";var l=new Image,s=t.dragingElement=t.svg.append("image").attr("xlink:href",o).attr("x",r.x-50*t.map[a][n][e].w).attr("y",r.y-25).attr("id","comp_"+a+"_"+n+"_"+e).attr("width",100*t.map[a][n][e].w);l.onload=function(e){s.attr("y",r.y-100/l.width*l.height+25),t.comps.push(s),t.sort(),s.call(i.drag().on("drag",function(e,n,a){var r=i.mouse(a[n]),o=t.twoDToIso(t.get2dFromTileCoordinates(t.getTileCoordinates(t.isoTo2D(new m(r[0],r[1]+25)),50),50));i.select(a[n]).attr("x",o.x-50).attr("y",o.y-a[n].getBBox().height+25),t.sort()}).on("end",function(e){}))},l.src=o},s=0;s<t.map[a][n].length;s++)l(s)},l=0;l<r;l++)o(l)}if(e)this.svg.append("g").attr("id","point").append("polygon").attr("points",this.getRectPoints(new m(0,0),new m(0,0))).attr("fill","#FFFFFF").attr("stroke","#FF0000").attr("stroke-width",2).attr("opacity",.5),this.svg.append("g").attr("id","_select").append("polygon").attr("points",this.getRectPoints(new m(0,0),new m(0,0))).attr("fill","#CCCCCC").attr("stroke","#2222CC").attr("stroke-width",2).attr("opacity",.5);else if(this.props.currentSelected){var s=this.twoDToIso(this.get2dFromTileCoordinates(this.props.currentSelected,50));this.svg.selectAll("#_select").attr("transform","translate("+s.x+","+s.y+")")}}},{key:"sort",value:function(){for(var e=this.map.length||50,t=0;t<e;t++){this.map[t]=this.map[t]||[];for(var n=this.map[t].length||50,a=0;a<n;a++)for(var r=0;r<this.map[t][a].length;r++){var o=this.svg.select("#comp_"+t+"_"+a+"_"+r);o.node()&&o.node().parentNode.appendChild(o.node())}}}},{key:"download",value:function(){saveSvgAsPng(this.rootsvg.node(),"diagram.png")}},{key:"isoTo2D",value:function(e){var t=new m(0,0);return t.x=(2*e.y+e.x)/2,t.y=(2*e.y-e.x)/2,t}},{key:"twoDToIso",value:function(e){var t=new m(0,0);return t.x=e.x-e.y,t.y=(e.x+e.y)/2,t}},{key:"getTileCoordinates",value:function(e,t){var n=new m(0,0);return n.x=Math.floor(e.x/t),n.y=Math.floor(e.y/t),n}},{key:"get2dFromTileCoordinates",value:function(e,t){var n=new m(0,0);return n.x=e.x*t,n.y=e.y*t,n}},{key:"render",value:function(){var e=this,t=this.props;t.isOver,t.canDrop,t.connectDropTarget;return l.default.createElement("div",null,l.default.createElement("div",{style:{width:800,height:500},ref:function(t){return e.root=t}}))}},{key:"componentWillReceiveProps",value:function(e){!this.props.isOver&&e.isOver,this.props.isOver&&e.isOver,this.props.isOverCurrent&&e.isOverCurrent}}]),t}(),h={addItem:u.addItem,itemSelected:u.itemPointSelected};t.default=(0,s.connect)(function(e){return{selectedItem:e.map.selectedItem,currentSelected:e.map.currentSelected}},h,null,{withRef:!0})(p)}}]);
//# sourceMappingURL=1.bundle.js.map