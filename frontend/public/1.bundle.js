(window.webpackJsonp=window.webpackJsonp||[]).push([[1],Array(22).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),a=c(n(162)),o=n(44),l=n(29),s=c(n(95)),i=c(n(72));n(104),n(102),n(101),n(99);c(n(83)),n(70);function c(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.applyMiddleware)((0,s.default)())(o.createStore)(i.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());t.default=function(e){return r.default.createElement(l.Provider,{store:u},r.default.createElement(a.default,null))}},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="localhost:3000"===window.location.host?"http://localhost:8080/api":"/api",a="localhost:3000"===window.location.host?"ws://localhost:8080/api/sensor/wsstatus":"ws://"+window.location.host+"/api/sensor/wsstatus";t.BASE_URL=r,t.BASE_WS_URL=a,t.getImageURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r+"/slice/"+e+"/imageByValue/"+t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=t.FileField=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.renderField=function(e){var t=e.input,n=e.label,r=e.type,o=e.meta,s=o.touched,i=o.error,c=e.help;return l.default.createElement("div",{className:"form-group "},l.default.createElement("label",null,n),l.default.createElement("div",null,l.default.createElement("input",a({className:"form-control"},t,{placeholder:n,type:r})),c&&l.default.createElement("small",{className:"form-text "},"* ",c),s&&i&&l.default.createElement("small",{className:"form-text text-danger"},"* ",i)))},t.renderFieldSelect=function(e){var t=e.input,n=e.label,r=e.meta,o=r.touched,s=r.error,i=e.help,c=e.options;return l.default.createElement("div",{className:"form-group "},l.default.createElement("label",null,n),l.default.createElement("div",null,l.default.createElement("select",a({className:"form-control"},t,{placeholder:n}),c.map(function(e){return l.default.createElement("option",{key:e,value:e},e)})),i&&l.default.createElement("small",{className:"form-text "},"* ",i),o&&s&&l.default.createElement("small",{className:"form-text text-danger"},"* ",s)))};var o=n(0),l=c(o),s=c(n(81)),i=c(n(62));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.FileField=function(e){function t(){var e,n,r;u(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleDropOrClick=function(e,t,n){var a=n,o=r.props.input,l=o.onChange,s=o.onBlur;"drop"===n.type&&(a=e.length?n.dataTransfer&&n.dataTransfer.files||e:null),s(a),l(a)},d(r,n)}return f(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.input,n=e.meta,r=(n.touched,n.error,this.props),o=r.accept,i=r.multiple,c=t&&t.value&&t.value[0]||null,u={accept:o,multiple:i,onDrop:this.handleDropOrClick};return l.default.createElement("div",null,l.default.createElement("input",a({type:"hidden",disabled:!0},t)),c?l.default.createElement("span",null,c.name):"Selecione um arquivo",l.default.createElement(s.default,a({style:{width:"50px",height:"50px",borderWidth:"2px",borderColor:"rgb(102, 102, 102)",borderStyle:"dashed",borderRadius:"5px"}},u),c?l.default.createElement("img",{width:"100%",src:c.preview}):null))}}]),t}(),t.Modal=function(e){function t(){return u(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,o.Component),r(t,[{key:"show",value:function(){this.modal&&(0,i.default)(this.modal).modal()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.title,a=t.buttons;return l.default.createElement("div",{className:"modal  fade ",ref:function(t){return e.modal=t},tabIndex:"-1",role:"dialog"},l.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-header"},l.default.createElement("h5",{className:"modal-title"},r),l.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.default.createElement("span",{"aria-hidden":"true"},"×"))),l.default.createElement("div",{className:"modal-body"},n),l.default.createElement("div",{className:"modal-footer"},a||l.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}}]),t}();t.default={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wsStatusStart=t.wsStatusStop=t.selectMap=t.fetchMaps=t.actions=void 0;var r,a=n(46),o=(r=a)&&r.__esModule?r:{default:r},l=n(31);var s=t.actions={FETCH_MAPS:"FETCH_MAPS",SELECT_MAP:"SELECT_MAP",FETCH_MAP_DETAIL:"FETCH_MAP_DETAIL",WS_MAP_MESSAGE:"WS_MAP_MESSAGE",WS_CONNECTED:"WS_CONNECTED",WS_DISCONNECTED:"WS_DISCONNECTED"},i=(t.fetchMaps=function(e){return{type:s.FETCH_MAPS,payload:o.default.get(l.BASE_URL+"/map")}},t.selectMap=function(e){return{type:s.FETCH_MAP_DETAIL,payload:o.default.get(l.BASE_URL+"/map/"+e)}},void 0),c=[];t.wsStatusStop=function(){i&&i.close()},t.wsStatusStart=function(e,t){if(t&&0!==t.length){if(i){if(t.length==c.length&&t.every(function(e,t){return e===c[t]}))return void console.log("Mesmo",c);console.log("Não é o mesmo Fechando conexão",c),i.close()}(i=new WebSocket(l.BASE_WS_URL+"?sensors="+JSON.stringify(t))).onopen=function(n){console.log("onopen ws"),c=t,e({type:s.WS_CONNECTED})},i.onmessage=function(t){console.log("message:",t),e({type:s.WS_MAP_MESSAGE,payload:JSON.parse(t.data)})},i.onclose=function(t){console.log("WS onclose:",t),c=[],e({type:s.WS_DISCONNECTED,payload:t})},i.onerror=function(t){c=[],e({type:s.WS_DISCONNECTED,payload:t})}}}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=t.remove=t.fetch=t.save=t.FILTER_PALETTE=t.FETCH_PALETTE=t.REMOVE_PALETTE=t.ADD_PALETTE=void 0;var r,a=n(46),o=(r=a)&&r.__esModule?r:{default:r},l=n(31);var s=t.ADD_PALETTE="ADD_PALETTE",i=t.REMOVE_PALETTE="REMOVE_PALETTE",c=t.FETCH_PALETTE="FETCH_PALETTE",u=t.FILTER_PALETTE="FILTER_PALETTE";t.save=function(e){var t=new FormData(e);t.append("values",JSON.stringify(e));var n=e.images.map(function(e,n){return t.append(""+n,e.image[0]),console.log(e.image),e.image[0]});return console.log(n),{type:s,payload:o.default.put(l.BASE_URL+"/slice",t)}},t.fetch=function(){return{type:c,payload:o.default.get(l.BASE_URL+"/slice")}},t.remove=function(e){return{type:i,payload:o.default.delete(l.BASE_URL+"/slice/"+e)}},t.filter=function(e){return{type:u,payload:e}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOGIN=void 0,t.login=function(e){return{type:s,payload:o.default.post(l.BASE_URL+"/login",e).then(function(e){return instance.defaultConfig.headers.authorization="bearer "+e.data,e})}};var r,a=n(46),o=(r=a)&&r.__esModule?r:{default:r},l=n(31);var s=t.LOGIN="LOGIN"},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goto=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(44),o=n(43),l=f(n(153)),s=f(n(133)),i=f(n(132)),c=f(n(131)),u=f(n(130)),d=n(64);function f(e){return e&&e.__esModule?e:{default:e}}t.goto=function(e){return{type:"CHANGE_PAGE",payload:e}};t.default=(0,a.combineReducers)({login:l.default,sensors:s.default,palette:i.default,map:c.default,maps:u.default,form:o.reducer,menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUrl:"/"},t=arguments[1];switch(t.type){case"CHANGE_PAGE":return Object.assign({},r({},e),{currentUrl:t.payload});case d.actions.FETCH_MAP_DETAIL+"_FULFILLED":return Object.assign({},r({},e),{currentUrl:"/mapas/detail"});default:return e}}})},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=(r=l)&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(98)),c=n(31);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function e(t,n){u(this,e),this.x=t,this.y=n},f=function(e){function t(e){u(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.map=e.map||[],n.baseX=25*n.map.length,n.comps=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"updateSliceImage",value:function(e,t,n,r){var a=-1;console.log(r);for(var o=0;o<this.map[t][n].length;o++)if(console.log("Procurando:",this.map[t][n][o]),this.map[t][n][o].id==r){a=o;break}-1!=a&&this.svg.select("#comp_"+t+"_"+n+"_"+a).node()&&(console.log(this.svg.select("#comp_"+t+"_"+n+"_"+a).node()),this.svg.select("#comp_"+t+"_"+n+"_"+a).node().src=e,this.svg.select("#comp_"+t+"_"+n+"_"+a).attr("xlink:href",e))}}]),o(t,[{key:"componentDidMount",value:function(){var e=this;this.mode=0,this.rootsvg=i.select(this.root).append("svg"),this.mainsvg=this.rootsvg.append("g"),this.grid=this.mainsvg.append("g"),this.svg=this.mainsvg.append("g"),this.svg.attr("fill","antiquewhite"),this.svg.attr("width","100%"),this.svg.attr("height","100%"),this.rootsvg.attr("width","100%"),this.rootsvg.attr("height","100%"),this.mainsvg.attr("width","100%"),this.mainsvg.attr("height","100%"),this.grid.attr("width","100%"),this.grid.attr("height","100%"),this.rootsvg.on("mouseleave",function(t){if(e.component&&e.dragingElement){e.dragingElement.remove();var n=e.comps.indexOf(e.dragingElement,0);n>=-1&&e.comps.splice(n,1),e.dragingElement=null}}),this.mainsvg.on("contextmenu",function(){return i.event.preventDefault(),!1}),this.mainsvg.on("mousedown",function(t){if(2==i.event.button){e.mode="SELECT_AREA",e.selectElement=e.createRect("selectArea");var n=i.mouse(i.event.currentTarget),r=e.getTileCoordinates(e.isoTo2D(new d(n[0],n[1]+25)),50);e.selectElement.attr("stroke","#00FF00"),e.selectElement.p1=r}}),this.mainsvg.on("mouseup",function(t){switch(e.mode){case"SELECT_AREA":if(e.component)for(var n=Math.min(e.selectElement.p1.x,e.selectElement.p2.x),r=Math.max(e.selectElement.p1.x,e.selectElement.p2.x),o=Math.min(e.selectElement.p1.y,e.selectElement.p2.y),l=Math.max(e.selectElement.p1.y,e.selectElement.p2.y),s=n;s<=r;s++)for(var i=o;i<=l;i++)e.props.addItem(a({},e.component),s,i);e.selectElement.remove()}e.mode=0}),this.mainsvg.on("click",function(t){var n=i.mouse(i.event.currentTarget),r=e.getTileCoordinates(e.isoTo2D(new d(n[0],n[1]+25)),50);e.component?e.props.addItem(a({},e.component),r.x,r.y):e.props.itemSelected(r.x,r.y)}),this.mainsvg.on("mousemove",function(t){var n=i.mouse(i.event.currentTarget),r=e.getTileCoordinates(e.isoTo2D(new d(n[0],n[1]+25)),50),a=e.twoDToIso(e.get2dFromTileCoordinates(r,50));switch(e.mode){case"SELECT_AREA":e.selectElement.attr("points",e.getRectPoints(e.selectElement.p1,r)),e.selectElement.p2=r;break;default:if(e.svg.selectAll("#point").attr("transform","translate("+a.x+","+a.y+")"),e.component)if(e.dragingElement=e.svg.selectAll("#moving"),e.dragingElement.node())e.dragingElement.attr("x",a.x-50*e.component.w).attr("y",a.y-e.dragingElement.node().getBBox().height+25),e.dragingElement.node()&&e.dragingElement.node().parentNode.appendChild(e.dragingElement.node());else{var o=e.component.image,l=new Image;l.onload=function(t){e.dragingElement=e.svg.append("image").attr("xlink:href",o).attr("x",a.x*e.component.w).attr("y",a.y).attr("id","moving").attr("opacity",.5).attr("width",100*e.component.w),e.comps.push(e.dragingElement),e.dragingElement.call(i.drag().on("drag",function(t,n,r){var a=i.mouse(r[n]),o=e.twoDToIso(e.get2dFromTileCoordinates(e.getTileCoordinates(e.isoTo2D(new d(a[0],a[1]+25)),50),50));e.svg.selectAll("#point").attr("transform","translate("+o.x+","+o.y+")"),i.select(r[n]).attr("x",o.x).attr("y",o.y-e.dragingElement.node().getBBox().height)}).on("end",function(e){}))},l.src=o}}});var t=i.zoom().filter(function(){return i.event instanceof WheelEvent||1==i.event.button}).scaleExtent([.1,10]).on("zoom",function(){e.mainsvg.attr("transform",i.event.transform)});this.rootsvg.call(t).call(t.transform,i.zoomIdentity.translate(this.baseX,0).scale(.5)),this.mainsvg.attr("transform","translate("+this.baseX+",0)scale(.5,.5)"),this.createGrid(!0)}},{key:"componentDidUpdate",value:function(){this.createGrid(),this.props.selectedItem?this.component=new function e(t,n,r,a){u(this,e),this.image=t,this.w=n,this.id=r,this.type=a}((0,c.getImageURL)(this.props.selectedItem._id,0),this.props.selectedItem.width,this.props.selectedItem._id,this.props.selectedItem.type):this.component=null}},{key:"getRectPoints",value:function(e,t){var n=this.twoDToIso(this.get2dFromTileCoordinates(new d(e.x,e.y),50)),r=this.twoDToIso(this.get2dFromTileCoordinates(new d(e.x,t.y),50)),a=this.twoDToIso(this.get2dFromTileCoordinates(new d(t.x,t.y),50)),o=this.twoDToIso(this.get2dFromTileCoordinates(new d(t.x,e.y),50)),l=n.x-50,s=n.y;return l+","+s+" "+r.x+","+(r.y-25)+" "+(a.x+50)+","+a.y+" "+o.x+","+(o.y+25)+" "+l+","+s}},{key:"createRect",value:function(e){return this.svg.append("g").attr("id",e).append("polygon").attr("points",this.getRectPoints(new d(0,0),new d(0,0))).attr("fill","#FFFFFF").attr("stroke","#FF0000").attr("stroke-width",2).attr("opacity",.5)}},{key:"createGrid",value:function(e){for(var t=this,n=this.map.length||50,r=0;r<n;r++){this.map[r]=this.map[r]||[];for(var a=this.map[r].length||50,o=function(n){t.map[r][n]=t.map[r][n]||[];var a=t.twoDToIso(t.get2dFromTileCoordinates(new d(r,n),50));if(e){var o=new d(r,n);t.grid.append("polygon").attr("points",t.getRectPoints(o,o)).attr("fill","#FFFFFF").attr("stroke","#CCCCCC").attr("stroke-width",2).attr("opacity",.5)}if(t.map[r][n])for(var l=function(e){var o=t.map[r][n][e].image;if(t.svg.select("#comp_"+r+"_"+n+"_"+e).node())return"continue";var l=new Image,s=t.dragingElement=t.svg.append("image").attr("xlink:href",o).attr("x",a.x-50*t.map[r][n][e].w).attr("y",a.y-25).attr("id","comp_"+r+"_"+n+"_"+e).attr("width",100*t.map[r][n][e].w);l.onload=function(e){s.attr("y",a.y-100/l.width*l.height+25),t.comps.push(s),t.sort(),s.call(i.drag().on("drag",function(e,n,r){var a=i.mouse(r[n]),o=t.twoDToIso(t.get2dFromTileCoordinates(t.getTileCoordinates(t.isoTo2D(new d(a[0],a[1]+25)),50),50));i.select(r[n]).attr("x",o.x-50).attr("y",o.y-r[n].getBBox().height+25),t.sort()}).on("end",function(e){}))},l.src=o},s=0;s<t.map[r][n].length;s++)l(s)},l=0;l<a;l++)o(l)}if(e)this.svg.append("g").attr("id","point").append("polygon").attr("points",this.getRectPoints(new d(0,0),new d(0,0))).attr("fill","#FFFFFF").attr("stroke","#FF0000").attr("stroke-width",2).attr("opacity",.5),this.svg.append("g").attr("id","_select").append("polygon").attr("points",this.getRectPoints(new d(0,0),new d(0,0))).attr("fill","#CCCCCC").attr("stroke","#2222CC").attr("stroke-width",2).attr("opacity",.5);else if(this.props.currentSelected){var s=this.twoDToIso(this.get2dFromTileCoordinates(this.props.currentSelected,50));this.svg.selectAll("#_select").attr("transform","translate("+s.x+","+s.y+")")}}},{key:"sort",value:function(){for(var e=this.map.length||50,t=0;t<e;t++){this.map[t]=this.map[t]||[];for(var n=this.map[t].length||50,r=0;r<n;r++)for(var a=0;a<this.map[t][r].length;a++){var o=this.svg.select("#comp_"+t+"_"+r+"_"+a);o.node()&&o.node().parentNode.appendChild(o.node())}}}},{key:"download",value:function(){saveSvgAsPng(this.rootsvg.node(),"diagram.png")}},{key:"isoTo2D",value:function(e){var t=new d(0,0);return t.x=(2*e.y+e.x)/2,t.y=(2*e.y-e.x)/2,t}},{key:"twoDToIso",value:function(e){var t=new d(0,0);return t.x=e.x-e.y,t.y=(e.x+e.y)/2,t}},{key:"getTileCoordinates",value:function(e,t){var n=new d(0,0);return n.x=Math.floor(e.x/t),n.y=Math.floor(e.y/t),n}},{key:"get2dFromTileCoordinates",value:function(e,t){var n=new d(0,0);return n.x=e.x*t,n.y=e.y*t,n}},{key:"render",value:function(){var e=this,t=this.props;t.isOver,t.canDrop,t.connectDropTarget;return s.default.createElement("div",null,s.default.createElement("div",{style:{width:800,height:500},ref:function(t){return e.root=t}}))}},{key:"componentWillReceiveProps",value:function(e){!this.props.isOver&&e.isOver,this.props.isOver&&e.isOver,this.props.isOverCurrent&&e.isOverCurrent}}]),t}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l(n(0));var r=n(43),a=n(29),o=(n(63),n(70),l(n(128)));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.connect)(function(e){return{loginError:e.login.error}})((0,r.reduxForm)({form:"login",validate:function(e){var t={};return e.username||(t.username="Campo obrigatório"),e.password||(t.password="Campo obrigatório"),t}})(o.default))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeName=t.selectProperties=t.saveProperties=t.itemPointSelected=t.addItem=t.saveMap=t.selectItem=t.CHANGE_NAME=t.SAVEMAP=t.SELECT_EDIT_PROPERTIES=t.SAVE_PROPERTIES=t.POINT_SELECTED=t.ADD_ITEM_ON_MAP=t.SELECT_ITEM=void 0;var r,a=n(46),o=(r=a)&&r.__esModule?r:{default:r},l=n(31);var s=t.SELECT_ITEM="SELECT_ITEM",i=t.ADD_ITEM_ON_MAP="ADD_ITEM_ON_MAP",c=t.POINT_SELECTED="POINT_SELECTED",u=t.SAVE_PROPERTIES="SAVE_PROPERTIES",d=t.SELECT_EDIT_PROPERTIES="SELECT_EDIT_PROPERTIES",f=t.SAVEMAP="SAVEMAP",p=t.CHANGE_NAME="CHANGE_NAME";t.selectItem=function(e){return{type:s,payload:e}},t.saveMap=function(e){return{type:f,payload:e._id?o.default.post(l.BASE_URL+"/map",e):o.default.put(l.BASE_URL+"/map",e)}},t.addItem=function(e,t,n){return{type:i,payload:{item:e,x:t,y:n}}},t.itemPointSelected=function(e,t){return{type:c,payload:{x:e,y:t}}},t.saveProperties=function(e){return{type:u,payload:e}},t.selectProperties=function(e){return{type:d,payload:e}},t.changeName=function(e){return{type:p,payload:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wsStatusStart=t.wsStatusStop=t.fetchSensors=t.selectSensor=t.closeChart=t.WS_DISCONNECTED=t.WS_CONNECTED=t.CLOSE_CHART=t.SENSOR_UPDATE=t.SELECT_SENSOR=t.INVALID_FILTER=t.FETCH_SENSORS=void 0;var r,a=n(31),o=n(46),l=(r=o)&&r.__esModule?r:{default:r};var s=t.FETCH_SENSORS="FETCH_SENSORS",i=(t.INVALID_FILTER="INVALID_FILTER",t.SELECT_SENSOR="SELECT_SENSOR"),c=t.SENSOR_UPDATE="SENSOR_UPDATE",u=t.CLOSE_CHART="CLOSE_CHART",d=t.WS_CONNECTED="WS_CONNECTED",f=t.WS_DISCONNECTED="WS_DISCONNECTED",p=(t.closeChart=function(){return{type:u}},t.selectSensor=function(e){return{type:i,payload:l.default.get(a.BASE_URL+"/sensor/values?name="+e)}},t.fetchSensors=function(e){return{type:s,payload:l.default.get(a.BASE_URL+"/sensor/list?name="+e+"&limit=10")}},void 0),m=[];t.wsStatusStop=function(){return p&&p.close(),{type:f}},t.wsStatusStart=function(e,t){if(t&&0!==t.length){if(Array.isArray(t)||(t=[t]),p){if(t.length==m.length&&t.every(function(e,t){return e===m[t]}))return void console.log("Mesmo",m);console.log("Não é o mesmo Fechando conexão",m),p.close()}(p=new WebSocket(a.BASE_WS_URL+"?sensors="+JSON.stringify(t))).onopen=function(n){console.log("onopen ws"),m=t,e({type:d})},p.onmessage=function(t){console.log("message:",t),e({type:c,payload:JSON.parse(t.data)})},p.onclose=function(t){console.log("WS onclose:",t),m=[],e({type:f})},p.onerror=function(t){m=[],e({type:f})}}}},,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=i(a),l=i(n(82)),s=n(31);function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){this.checkConnections()}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this;if(this.props.messages.length!=e.messages.length&&e.messages.length>0){var n=e.messages[0];this.props.currentMap.mapSensors.filter(function(e){return e.sensor==n.sensor}).map(function(e){t.mapRef.getWrappedInstance().updateSliceImage((0,s.getImageURL)(e.slice,n.value.value),e.position.x,e.position.y,e.slice)})}}},{key:"componentWillUnmount",value:function(){(0,this.props.wsStatusStop)()}},{key:"checkConnections",value:function(){var e=this.props,t=e.startMonitoring,n=e.wsStatusStop,r=e.currentMap;this.monitoring&&n(),r&&r.mapSensors&&(t(r.mapSensors.map(function(e){return e.sensor})),this.monitoring=!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentMap,r=t.messages,a=n.name,s=void 0===a?"":a,i=n.map,c=void 0===i?[]:i;return o.default.createElement("div",null,o.default.createElement("h1",null,s),o.default.createElement(l.default,{ref:function(t){return e.mapRef=t},map:c}),"Mensagens:",r.map(function(e,t){return o.default.createElement("div",{key:t},o.default.createElement("p",null,e.sensor,":",e.value.value," ",o.default.createElement("small",null,e.value.data)))}))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l(n(0));var r=n(29),a=n(64),o=l(n(105));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.connect)(function(e){return{currentMap:e.maps.currentMap,messages:e.maps.messages}},function(e){return{startMonitoring:function(t){console.log("startMonitoring:",t),(0,a.wsStatusStart)(e,t)},wsStatusStop:a.wsStatusStop}})(o.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchMaps)()}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.selectMap;e.goto;return l.default.createElement("div",null,l.default.createElement("ul",{className:"list-group"},t.map(function(e,t){return l.default.createElement("li",{onClick:function(t){return n(e._id)},key:t,className:"list-group-item"},e.name)})))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l(n(0));var r=n(29),a=n(64),o=l(n(107));function l(e){return e&&e.__esModule?e:{default:e}}var s={fetchMaps:a.fetchMaps,selectMap:a.selectMap};t.default=(0,r.connect)(function(e){return{list:e.maps.list}},s)(o.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),l=s(n(81));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDropOrClick=function(e,t,r){"drop"===r.type&&(console.log("acceptedFiles:",e),console.log("rejectedFiles:",t),e.length&&(n.setState({files:e}),r.dataTransfer&&r.dataTransfer.files))},n.state={files:[]},n.save=n.save.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"awesomeName",value:function(e){return e.split(".")[0]}},{key:"save",value:function(){var e=this;this.state.files.map(function(t){console.log(t),e.props.save({name:e.awesomeName(t.name),type:"IMAGE",images:[{image:[t],value:1}]})})}},{key:"render",value:function(){var e={accept:"image/png",multiple:!0,onDrop:this.handleDropOrClick};return o.default.createElement("div",null,o.default.createElement(l.default,r({style:{width:"50px",height:"50px",borderWidth:"2px",borderColor:"rgb(102, 102, 102)",borderStyle:"dashed",borderRadius:"5px"}},e)),o.default.createElement("button",{key:"1",className:"btn btn-primary",onClick:this.save},"Salvar"),this.state.files?this.state.files.map(function(e,t){return o.default.createElement("img",{width:"100px",key:t,src:e.preview})}):"Selecione um arquivo")}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},l=n(43),s=n(63);var i=function(e){var t=e.fields,n=e.meta,r=n.error,a=n.submitFailed;return o.default.createElement("div",{className:"form-group col-md-12"},o.default.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return t.push({})}}," + Image")," ",a&&r&&o.default.createElement("span",null,r),o.default.createElement("div",null,t.map(function(e,n){return o.default.createElement("div",{className:"col-6",key:n},o.default.createElement("h4",null,"Imagem #",n+1),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-6"},o.default.createElement(l.Field,{accept:"image/png",name:e+".image",component:s.FileField})),o.default.createElement("div",{className:"col-5"},o.default.createElement(l.Field,{help:"Informe o valor do sensor normalmente entre 0 e 1",name:e+".status",component:s.renderField,label:"Status"})),o.default.createElement("div",{className:"col-1"},o.default.createElement("button",{className:"btn",onClick:function(e){t.remove(n)}},o.default.createElement("i",{className:"fa fa-window-close"})))))})))};t.default=(0,l.reduxForm)({form:"FormPalette"})(function(e){var t=e.handleSubmit,n=!1;return o.default.createElement("div",null,o.default.createElement("button",{className:"btn",onClick:function(e){n.show()}},"+"),o.default.createElement(s.Modal,{title:"Novo Item",ref:function(e){return n=e},buttons:[o.default.createElement("button",{key:"1",className:"btn btn-primary",onClick:t},"Salvar")]},o.default.createElement("div",null,o.default.createElement("div",{className:"form-row"},o.default.createElement("div",{className:"form-group col-md-6"},o.default.createElement(l.Field,{component:s.renderField,name:"name",label:"Nome",help:"Nome do componente para facilitar sua busca"})),o.default.createElement("div",{className:"form-group col-md-6"},o.default.createElement(l.Field,{component:s.renderFieldSelect,name:"type",label:"Tipo",options:["ATUADOR","SENSOR","IMAGE"],help:"ATUADOR, SENSOR, IMAGE"}))),o.default.createElement("div",{className:"form-row"},o.default.createElement(l.FieldArray,{name:"images",component:i})))))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=c(a),l=(n(63),c(n(110))),s=c(n(109)),i=n(31);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){(0,this.props.fetch)()}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.save,r=e.remove;return o.default.createElement("div",null,o.default.createElement(s.default,{save:n}),o.default.createElement(l.default,{onSubmit:n}),o.default.createElement("ul",{className:"list-group"},t.map(function(e,t){return o.default.createElement("li",{key:t,className:"list-group-item"},o.default.createElement("img",{style:{width:50},src:(0,i.getImageURL)(e._id,0)}),e.type," - ",e.name,o.default.createElement("i",{onClick:function(t){return r(e._id)},className:"fa fa-trash"}))})))}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l(n(0));var r=n(29),a=n(68),o=l(n(111));function l(e){return e&&e.__esModule?e:{default:e}}var s={fetch:a.fetch,remove:a.remove,save:a.save};t.default=(0,r.connect)(function(e){return{list:e.palette.list}},s)(o.default)},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem01IDExSDd2LTJoMTB2MnoiLz4KPC9zdmc+"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},l=n(31),s=n(43);t.default=function(e){var t=e.slice,n=e.onSubmit,r=e.position;return o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("h5",{className:"modal-title"},"Sensor"),o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.default.createElement("span",{"aria-hidden":"true"},"×"))),o.default.createElement("div",{className:"modal-body"},o.default.createElement("div",null,o.default.createElement("div",{className:"form-group"},o.default.createElement("label",null,"Image:"),o.default.createElement("p",null,o.default.createElement("img",{src:(0,l.getImageURL)(t),style:{height:50}})),o.default.createElement("small",null,"Posição:",r.x,",",r.y)),o.default.createElement("div",{className:"form-group"},o.default.createElement("label",null,"Nome"),o.default.createElement(s.Field,{type:"text",component:"input",name:"name",className:"form-control",placeholder:"Nome"})),o.default.createElement("div",{className:"form-group"},o.default.createElement("label",null,"Sensor"),o.default.createElement(s.Field,{type:"text",component:"input",name:"sensor",className:"form-control",placeholder:"Sensor"})))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancelar"),o.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:n},"Salvar")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=i(n(0)),o=i(n(62)),l=i(n(114)),s=n(31);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.handleSubmit,n=(e.selectedItem,e.mapSensors),i=e.palette,c=e.selectedProperty,u=e.selectProperties,d=e.saveProperties;return a.default.createElement("div",null,n.map(function(e,t){return a.default.createElement("div",{key:t},a.default.createElement("div",{className:"card",style:{width:"18rem"}},a.default.createElement("img",{className:"card-img-top",src:(0,s.getImageURL)(e.slice)}),a.default.createElement("div",{className:"card-body"},a.default.createElement("h5",{className:"card-title"},e.name),a.default.createElement("p",{className:"card-text"},"Imagem: ",i.find(function(t){return t._id===e.slice}).name),a.default.createElement("p",null,"Sensor:  ",e.sensor||"Não Ligado"),a.default.createElement("button",{className:"btn  btn-primary",onClick:function(t){u(e)}},"Licar"))))}),c?a.default.createElement("div",{className:"modal  fade ",ref:function(e){return(0,o.default)(e).modal()},tabIndex:"-1",role:"dialog"},a.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},a.default.createElement(l.default,r({},c,e,{onSubmit:t(d)})))):null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=l(a);l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){return o.default.createElement("div",null,"item1")}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(82)),o=(i(n(116)),n(31)),l=i(n(115)),s=i(n(113));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){e.currentSelected,e.addItem,e.itemSelected;var t=e.palette,n=e.selectItem,i=e.filter,c=e.filterText,u=e.mapSensors,d=e.selectedItem,f=e.saveMap,p=e.map,m=e.mapName,h=e.changeName;return r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-3"},r.default.createElement("nav",{className:"navbar navbar-light bg-light",style:{height:50}},r.default.createElement("div",{className:"col-6"},r.default.createElement("input",{type:"text",className:"form-control ",value:c,onChange:function(e){return i(e.target.value)},placeholder:"Filtro"})),d?r.default.createElement("div",{className:"col-6",style:{height:50}},r.default.createElement("div",null,r.default.createElement("img",{style:{height:50},src:(0,o.getImageURL)(d._id)}),r.default.createElement("img",{src:s.default,onClick:function(e){n(null)},className:"mr-3"}))):null),r.default.createElement("nav",{className:"navbar navbar-light bg-light",style:{height:50}},r.default.createElement("div",{className:"col-6"},r.default.createElement("input",{type:"text",className:"form-control ",value:m,onChange:function(e){return h(e.target.value)},placeholder:"Nome do Mapa"})),r.default.createElement("div",{className:"col-6"},r.default.createElement("button",{className:"btn",onClick:function(e){return f({map:p,name:m,mapSensors:u})}},"Salvar"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-12"},r.default.createElement("div",{id:"accordion"},["IMAGE","SENSOR","ATUADOR"].map(function(e){return r.default.createElement("div",{className:"card",key:e},r.default.createElement("div",{className:"card-header",id:"heading"+e},r.default.createElement("h5",{className:"mb-0"},r.default.createElement("button",{className:"btn btn-link","data-toggle":"collapse","data-target":"#collapse"+e,"aria-expanded":"true","aria-controls":"collapse"+e},e))),r.default.createElement("div",{id:"collapse"+e,className:"collapse show","aria-labelledby":"heading"+e,"data-parent":"#accordion"},r.default.createElement("div",{className:"card-body"},r.default.createElement("div",{className:"row",style:{overflowY:"scroll",maxHeight:"200px"}},t.filter(function(t){return t.type===e}).map(function(e,t){return r.default.createElement("div",{className:"col-4",key:t,onClick:function(t){n(e)}},r.default.createElement("img",{style:{height:50},src:(0,o.getImageURL)(e._id,0)}))})))))}))))),r.default.createElement("div",{className:"col-7"},r.default.createElement(a.default,e)),r.default.createElement("div",{className:"col-2"},r.default.createElement(l.default,e)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(n(0));var r=n(29),a=n(43),o=n(68),l=n(84),s=i(n(117));function i(e){return e&&e.__esModule?e:{default:e}}var c={selectItem:l.selectItem,filter:o.filter,saveMap:l.saveMap,changeName:l.changeName,addItem:l.addItem,itemSelected:l.itemPointSelected,selectProperties:l.selectProperties,saveProperties:l.saveProperties};t.default=(0,a.reduxForm)({form:"PropertiesForm"})((0,r.connect)(function(e){return{palette:e.palette.listFilterd,filterText:e.palette.filter,selectedItem:e.map.selectedItem,currentSelected:e.map.currentSelected,map:e.map.map,mapName:e.map.mapName,mapSensors:e.map.mapSensors,selectedProperty:e.map.selectedProperty}},c)(s.default))},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0zLjUgMTguNDlsNi02LjAxIDQgNEwyMiA2LjkybC0xLjQxLTEuNDEtNy4wOSA3Ljk3LTQtNEwyIDE2Ljk5eiIvPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjQUEyMjIyIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGlkPSJhIi8+CiAgICA8L2RlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImIiPgogICAgICAgIDx1c2Ugb3ZlcmZsb3c9InZpc2libGUiIHhsaW5rOmhyZWY9IiNhIi8+CiAgICA8L2NsaXBQYXRoPgogICAgPHBhdGggY2xpcC1wYXRoPSJ1cmwoI2IpIiBkPSJNOS4wMSAxNEgydjJoNy4wMXYzTDEzIDE1bC0zLjk5LTR2M3ptNS45OC0xdi0zSDIyVjhoLTcuMDFWNUwxMSA5bDMuOTkgNHoiLz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMjJBQTIyIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGlkPSJhIi8+CiAgICA8L2RlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImIiPgogICAgICAgIDx1c2Ugb3ZlcmZsb3c9InZpc2libGUiIHhsaW5rOmhyZWY9IiNhIi8+CiAgICA8L2NsaXBQYXRoPgogICAgPHBhdGggY2xpcC1wYXRoPSJ1cmwoI2IpIiBkPSJNOS4wMSAxNEgydjJoNy4wMXYzTDEzIDE1bC0zLjk5LTR2M3ptNS45OC0xdi0zSDIyVjhoLTcuMDFWNUwxMSA5bDMuOTkgNHoiLz4KPC9zdmc+"},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=u(a),l=u(n(62)),s=u(n(124));n(123);var i=u(n(121)),c=u(n(120));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props.wsStatusStop;this.modal&&this.props.hasSelectedSensor&&((0,l.default)(this.modal).modal(),(0,l.default)(this.modal).on("hidden.bs.modal",function(t){e()}))}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this;console.log("SensorChart - componentDidUpdate");var t=this.props,n=t.hasSelectedSensor,r=t.startMonitoring,a=t.selectedSensor,o=a.sensor,i=a.values;this.modal&&n&&(0,l.default)(this.modal).modal();var c=[];i&&(""!==o&&r(o),c=i.reduce(function(e,t){return e[0].push(new Date(t.data)),e[1].push(t.value),e},[["x"],["data1"]])),this.chartRef?this.chartRef.load({columns:c}):this.chartRef=s.default.generate({bindto:this.chart,size:{height:400,width:600},data:{x:"x",columns:c},axis:{x:{type:"timeseries",tick:{format:"%H:%M:%S"}}}}),setTimeout(function(t){return e.chartRef.resize({height:e.chart.clientHeight,width:e.chart.clientWidth})},300)}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedSensor,r=t.wsConnection,a=t.startMonitoring,l=n.sensor;return o.default.createElement("div",{className:"modal  fade ",ref:function(t){return e.modal=t},tabIndex:"-1",role:"dialog"},o.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("h5",{className:"modal-title"},r?o.default.createElement("img",{src:i.default,onClick:function(){return a(l)}}):o.default.createElement("img",{src:c.default,onClick:function(){return a(l)}}),"  Sensor - ",l||"Carregando..."),o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.default.createElement("span",{"aria-hidden":"true"},"×"))),o.default.createElement("div",{className:"modal-body"},o.default.createElement("div",{ref:function(t){return e.chart=t},style:{height:"400px"}})),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}}]),t}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=i(a),l=i(n(125)),s=i(n(119));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.sensor,n=e.onClick;return o.default.createElement("div",{onClick:n,className:"list-group-item list-group-item-action"},o.default.createElement("img",{src:s.default})," ::. ",t)},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props.fetchSensors;console.log(this.props),e()}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.fetchSensors,r=e.selectSensor,s=e.hasSelectedSensor;return o.default.createElement(a.Fragment,null,o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"form-group"},o.default.createElement("input",{type:"email",className:"form-control",onChange:function(e){n(e.target.value)},placeholder:"Sensor Name"}),o.default.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Minimun 1 characters")),o.default.createElement("div",{className:"list-group"},t.map(function(e,t){return o.default.createElement(c,{onClick:function(t){return r(e)},key:t,sensor:e})}))),s?o.default.createElement(l.default,this.props):null)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l(n(0));var r=n(85),a=n(29),o=l(n(126));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.connect)(function(e){return{list:e.sensors.list,currentFilter:e.sensors.currentFilter,hasSelectedSensor:e.sensors.hasSelectedSensor,wsConnection:e.sensors.wsConnection,selectedSensor:e.sensors.selectedSensor}},function(e){return{fetchSensors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e((0,r.fetchSensors)(t))},selectSensor:function(t){return e((0,r.selectSensor)(t))},startMonitoring:function(t){return(0,r.wsStatusStart)(e,t)},wsStatusStop:r.wsStatusStop}})(o.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},l=n(63),s=n(43);var i=function(e){var t=e.handleSubmit,n=e.loginError;return o.default.createElement("form",{className:"form",role:"form",autoComplete:"off",id:"formLogin",noValidate:""},o.default.createElement("div",{className:"form-group"},o.default.createElement(s.Field,{type:"text",name:"username",label:"E-mail",component:l.renderField})),o.default.createElement("div",{className:"form-group"},o.default.createElement(s.Field,{type:"password",name:"password",label:"Password",component:l.renderField})),n?o.default.createElement("div",{className:"alert alert-danger",role:"alert"},n):null,o.default.createElement("button",{onClick:t,className:"btn btn-success btn-lg float-right",id:"btnLogin"},"Login"))};t.default=function(e){var t=e.onSubmit;return o.default.createElement("div",{className:"container py-5"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-6 mx-auto"},o.default.createElement("div",{className:"card rounded-0"},o.default.createElement("div",{className:"card-header"},o.default.createElement("h3",{className:"mb-0"},"Login")),o.default.createElement("div",{className:"card-body"},o.default.createElement(i,{onSubmit:t}))))))))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(64);var o={list:[],currentMap:{},messages:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,l=t.payload;switch(n){case a.actions.FETCH_MAPS+"_FULFILLED":return r({},e,{list:l.data});case a.actions.FETCH_MAP_DETAIL+"_FULFILLED":return r({},e,{currentMap:l.data});case a.actions.WS_CONNECTED:case a.actions.WS_DISCONNECTED:return r({},e,{messages:[]});case a.actions.WS_MAP_MESSAGE:return r({},e,{messages:[l].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.messages))});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(84);function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}for(var l=[],s=(new Array(10),0);s<10;s++)l.push(new Array(10));var i={selectedItem:null,map:l,mapSensors:[],mapName:"",currentSelected:null,selectedProperty:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1],n=t.type,l=t.payload;switch(n){case a.SELECT_ITEM:return console.log(e),console.log(l),r({},e,{selectedItem:l});case a.ADD_ITEM_ON_MAP:var s=[].concat(o(e.map));return s[l.x][l.y].push(l.item),"SENSOR"===l.item.type||"ATUADOR"===l.item.type?r({},e,{map:s,mapSensors:[].concat(o(e.mapSensors),[{slice:l.item.id,sensor:"",position:{x:l.x,y:l.y}}])}):r({},e,{map:s});case a.POINT_SELECTED:return r({},e,{currentSelected:l});case a.SAVE_PROPERTIES:return r({},e,{mapSensors:e.mapSensors.map(function(t){return t.slice==e.selectedProperty.slice&&t.position==e.selectedProperty.position?r({},t,{name:l.name,sensor:l.sensor}):t}),selectedProperty:null});case a.SELECT_EDIT_PROPERTIES:return r({},e,{selectedProperty:l});case a.CHANGE_NAME:return r({},e,{mapName:l});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(68);var o={list:[],listFilterd:[],loading:!1,filter:""};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,l=t.payload;switch(n){case a.ADD_PALETTE+"_FULFILLED":return r({},e,{list:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.list),[l.data])});case a.REMOVE_PALETTE+"_FULFILLED":return r({},e,{list:e.list.filter(function(e){return e._id!=l.data._id})});case a.FETCH_PALETTE+"_FULFILLED":return r({},e,{list:l.data,loading:!1,listFilterd:e.filter?l.data.filter(function(t){return t.name.toLowerCase().indexOf(e.filter)>=0}):l.data});case a.FETCH_PALETTE+"_REJECTED":case a.FETCH_PALETTE+"_PENDING":return r({},e,{list:[],loading:!0});case a.FILTER_PALETTE:return r({},e,{filter:l,listFilterd:l?e.list.filter(function(e){return e.name.toLowerCase().indexOf(l)>=0}):e.list});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(85);var o={sensor:"",values:[]},l={list:[],selectedSensor:o,hasSelectedSensor:!1,wsConnection:!1,limit:100};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case a.WS_CONNECTED:return r({},e,{wsConnection:!0});case a.WS_DISCONNECTED:return r({},e,{wsConnection:!1,hasSelectedSensor:!1,selectedSensor:o});case a.FETCH_SENSORS+"_FULFILLED":return Object.assign({},e,{list:t.payload.data});case a.INVALID_FILTER:return Object.assign({},e,{list:[]});case a.SENSOR_UPDATE:var n=t.payload;if(console.log(n),e.selectedSensor&&e.selectedSensor.values&&e.selectedSensor.sensor==n.sensor){var s=Object.assign(e.selectedSensor,{values:[n.value].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.selectedSensor.values))});return s.values.length>e.limit&&s.values.splice(e.limit,s.values.length-e.limit),Object.assign({},e,{selectedSensor:s})}return e;case a.SELECT_SENSOR+"_FULFILLED":return Object.assign({},e,{selectedSensor:t.payload.data});case a.SELECT_SENSOR+"_REJECTED":return Object.assign({},e,{selectedSensor:o,hasSelectedSensor:!1});case a.SELECT_SENSOR+"_PENDING":return Object.assign({},e,{selectedSensor:o,hasSelectedSensor:!0});case a.CLOSE_CHART:return Object.assign({},e,{selectedSensor:o,hasSelectedSensor:!1});default:return e}}},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(70);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoged:!0,error:""},t=arguments[1];if(!t.payload)return e;switch(t.type){case a.LOGIN:if(t.payload.status||t.payload.response&&t.payload.response.status)switch(t.payload.status||t.payload.response.status){case 200:return r({},e,{isLoged:!0,error:""});case 401:return r({},e,{isLoged:!1,error:"Usuário ou senha invalidos"})}return r({},e,{isLoged:!1,error:"Erro ao tentar acessar o servidor"});default:return e}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=(r=o)&&r.__esModule?r:{default:r},s=n(29);n(96),n(72);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.goto=n.goto.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"goto",value:function(e){this.props.changeUrl(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.url,r=void 0===n?"":n,a=t.routes;return l.default.createElement("div",{className:"list-group"},l.default.createElement("div",{onClick:function(){return e.goto("/")},className:"list-group-item "+("/"==r?"active":"")},"Home"),a.map(function(t,n){return t.title?l.default.createElement("div",{onClick:function(){return e.goto(t.path)},className:"list-group-item "+(r.startsWith(t.path)?"active":""),key:n},t.title):null}))}}]),t}();t.default=(0,s.connect)(function(e){return{url:e.menu.currentUrl}})(i)},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=E(a),l=n(161),s=E(n(92)),i=n(29),c=E(n(155)),u=n(72),d=E(n(83)),f=E(n(127)),p=E(n(118)),m=E(n(112)),h=E(n(108)),v=E(n(106));function E(e){return e&&e.__esModule?e:{default:e}}var g=(0,s.default)({queryKey:!1}),y=[{title:"",path:"/login",component:d.default},{title:"Sensores",path:"/sensor",component:f.default},{title:"Editor",path:"/editor",component:p.default},{title:"Palette",path:"/palette/list",component:m.default},{title:"Mapas",path:"/mapas/list",component:h.default},{title:"Map Detail",path:"/mapas/detail",component:v.default,hide:!0}],_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.changeUrl;t(e.login?g.location.pathname:"/login")}},{key:"shouldComponentUpdate",value:function(e){return e.currentUrl&&e.currentUrl!=this.props.currentUrl&&g.push(e.currentUrl),!0}},{key:"render",value:function(){var e=this.props,t=e.changeUrl,n=e.login;return o.default.createElement(l.Router,{history:g},o.default.createElement("div",{className:"container-fluid"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-2"},n?o.default.createElement(c.default,{routes:y,changeUrl:t}):null),o.default.createElement("div",{className:"col-10"},y.map(function(e,t){return o.default.createElement(l.Route,{key:t,path:e.path,component:e.component})})))))}}]),t}();t.default=(0,i.connect)(function(e){return{login:e.login.isLoged,currentUrl:e.menu.currentUrl}},function(e){return{changeUrl:function(t){e((0,u.goto)(t))}}})(_)}])]);
//# sourceMappingURL=1.bundle.js.map